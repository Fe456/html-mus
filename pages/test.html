<!doctype html>
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Audio Player Debug</title>
    <style>
        body { background-color: #272626; color: white; font-family: Arial, sans-serif; }
        .container { width: 80%; margin: auto; padding: 20px; }
        .controls { display: flex; justify-content: space-between; }
        .controls i { cursor: pointer; }
        #progress { width: 100%; }
        #volumeBar { width: 50%; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Audio Player Test</h2>
        
        <!-- Audio Player -->
        <audio id="song" controls>
            <source id="audio-source" type="audio/mpeg">
        </audio>

        <div class="controls">
            <div id="progress-container" style="width: 100%; height: 10px; background: #ddd; position: relative;">
                <div id="progress-bar" style="width: 0%; height: 100%; background: #76c7c0;"></div>
            </div>
        </div>
    </div>

    <script>
        // Variables
        const song = document.getElementById("song");
        const progressBar = document.getElementById('progress-bar');

        let isPlaying = false;

        // Set song source (replace with your own URL)
        const songUrl = 'http://localhost:3000/musicas/audio/1'; // Test song URL
        song.src = songUrl;

        const progressContainer = document.getElementById('progress-container');

        let lastUpdate = 0;  // Timestamp of last update

        song.ontimeupdate = function() {
            const now = Date.now();
            if (now - lastUpdate > 100) {  // Only update progress every 100ms (can be adjusted)
                lastUpdate = now;
                if (!isPressed) {
                    progress.value = song.currentTime;  // Update progress
                }
            }
        };

        // Click on progress bar to jump to specific time
        progressContainer.addEventListener('click', function(event) {
            const rect = progressContainer.getBoundingClientRect();
            const offsetX = event.clientX - rect.left;  // Calculate where the user clicked within the container
            const progress = (offsetX / rect.width) * song.duration;  // Calculate corresponding time in song
            song.currentTime = progress;  // Set current time of audio based on click
        });

    </script>
</body>
</html>
